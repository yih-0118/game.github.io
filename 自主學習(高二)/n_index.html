<!DOCTYPE html>
<html>

<head>
    <html lang="cn">
    <title>俄羅斯方塊</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <link rel="stylesheet" href="n_index.css">
</head>

<body>
    <div id="tetris-container">
        <canvas id="tetris" width="150" height="300"></canvas>
    </div>

    <div id="score-panel">
        <div class="score-panel-item" id="score-container">
            Score: <span id="score">0</span>
        </div>
        <div class="score-panel-item" id="level-container">
            Level: <span id="level">1</span>
        </div>
    </div>

    <div id="button-container">
        <div class="button-row">
            <button class="button" id="move-left-button">
                <i class="fas fa-arrow-left"></i>
            </button>

            <button class="button" id="rotate-button">Rotate
                <i class="fas fa-sync-alt"></i>
            </button>

            <button class="button" id="move-right-button">
                <i class="fas fa-arrow-right"></i>
            </button>
        </div>

        <div class="button-row">
            <button class="button" id="pause-button"><i class="fas fa-pause"></i> Pause</button>

            <button class="button" id="move-down-button">
                <i class="fas fa-arrow-down"></i>
            </button>



            <button class="button" id="restart-button"><i class="fas fa-redo"></i> Restart</button>
        </div>
    </div>

    <script src="Fang's Cube.js"></script>
    <script src="n_rule.js"></script>
    <script>
        const rotate_button = document.getElementById("rotate-button");
        const move_left_button = document.getElementById("move-left-button");
        const move_right_button = document.getElementById("move-right-button");
        const move_down_button = document.getElementById("move-down-button");
        const pause_button = document.getElementById("pause-button");
        const restart_button = document.getElementById("restart-button");
        let is_paused = false;

        pause_button.addEventListener("click", () => {
            if (is_paused) {
                is_paused = false;
                drop();
                pause_button.innerHTML = '<i class="fas fa-pause"></i> Pause';
            } else {
                is_paused = true;
                pause_button.innerHTML = '<i class="fas fa-play"></i> Resume';
            }
        });

        restart_button.addEventListener("click", () => {
            is_paused = false;
            p = random_piece();
            board = create_board();
            score = 0;
            hardmode = 8;
            levelElement.innerHTML = hardmode;
            scoreElement.innerHTML = score;
            pause_button.innerHTML = '<i class="fas fa-pause"></i> Pause';
            drop();
            gameOver = false;
            gameOverMessage.style.display = 'none';
        });

        rotate_button.addEventListener("click", () => {
            p.rotate();
            dropStart = Date.now();
        });

        move_left_button.addEventListener("click", () => {
            p.moveLeft();
            dropStart = Date.now();
        });

        move_right_button.addEventListener("click", () => {
            p.moveRight();
            dropStart = Date.now();
        });

        move_down_button.addEventListener("click", () => {
            p.moveDown();
        });
    </script>
</body>

</html>